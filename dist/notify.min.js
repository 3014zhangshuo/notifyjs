/** Notify.js - v0.0.1 - 2013/06/11
 * http://notifyjs.com/
 * Copyright (c) 2013 Jaime Pillora - MIT
 */
(function(t,n,i){"use strict";var e,o,r,s,a,h,l,p,c,u,d,f,m,w,y,g,v,b,x,P,S,C,H,T=[].indexOf||function(t){for(var n=0,i=this.length;i>n;n++)if(n in this&&this[n]===t)return n;return-1};v="notify",g=v+"js",x={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},c=["l","c","r"],H=["t","m","b"],m=["t","b","l","r"],w={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},y=function(t){var n;return n=[],$.each(t.split(/\W+/),function(t,e){var o;return o=e.toLowerCase().charAt(0),x[o]?n.push(o):i}),n},C={},r={name:"core",html:'<div class="'+g+'-wrapper">\n  <div class="'+g+'-arrow"></div>\n  <div class="'+g+'-container"></div>\n</div>',css:"."+g+"-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n."+g+"-corner ."+g+"-wrapper,\n."+g+"-corner ."+g+"-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: inherit;\n  margin: 3px;\n}\n\n."+g+"-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 0;\n}\n\n."+g+"-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  cursor: pointer;\n}\n\n."+g+"-text {\n  position: relative;\n}\n\n."+g+"-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}"},S={"border-radius":["-webkit-","-moz-"]},l=function(t){return C[t]},o=function(n,e){var o,r;if(!n)throw"Missing Style name";if(!e)throw"Missing Style definition";return(null!=(r=C[n])?r.cssElem:void 0)&&(t.console&&console.warn(""+v+": overwriting style '"+n+"'"),C[n].cssElem.remove()),e.name=n,C[n]=e,o="",e.classes&&$.each(e.classes,function(t,n){return o+="."+g+"-"+e.name+"-"+t+" {\n",$.each(n,function(t,n){return S[t]&&$.each(S[t],function(i,e){return o+="  "+e+t+": "+n+";\n"}),o+="  "+t+": "+n+";\n"}),o+="}\n"}),e.css&&(o+="/* styles for "+e.name+" */\n"+e.css),o?(e.cssElem=f(o),e.cssElem.attr("id","notify-"+e.name)):i},f=function(t){var n;n=s("style"),$("head").append(n);try{n.html(t)}catch(i){n[0].styleSheet.cssText=t}return n},b={autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},d=function(t,n){var i;return i=function(){},i.prototype=t,$.extend(!0,new i,n)},a=function(t){return $.extend(b,t)},s=function(t){return $("<"+t+"></"+t+">")},p={},h=function(t){var n;return t.is("[type=radio]")&&(n=t.parents("form:first").find("[type=radio]").filter(function(n,i){return $(i).attr("name")===t.attr("name")}),t=n.first()),t},u=function(t,n,e){var o,r;if("string"==typeof e)e=parseInt(e,10);else if("number"!=typeof e)return;if(!isNaN(e))return o=x[w[n.charAt(0)]],r=n,t[o]!==i&&(n=x[o.charAt(0)],e=-e),t[n]===i?t[n]=e:t[n]+=e,null},P=function(t,n,i){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return i/2-n/2;if("r"===t||"b"===t)return i-n;throw"Invalid alignment"},e=function(){function t(t,n,i){"string"==typeof i&&(i={className:i}),this.options=d(b,$.isPlainObject(i)?i:{}),this.loadHTML(),this.wrapper=$(r.html),this.wrapper.data(g,this),this.arrow=this.wrapper.find("."+g+"-arrow"),this.container=this.wrapper.find("."+g+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=h(t),this.elem.data(g,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(n)}return t.prototype.loadHTML=function(){var t;if(t=this.getStyle(),this.userContainer=$(t.html),this.text=this.userContainer.find("[data-notify-text]"),0===this.text.length&&(this.text=this.userContainer.find("[data-notify-html]"),this.rawHTML=!0),0===this.text.length)throw"style: '"+name+"' HTML is missing a: 'data-notify-text' or 'data-notify-html' attribute";return this.text.addClass(""+g+"-text")},t.prototype.show=function(t,n){var e,o,r,s,a,h=this;if(o=function(){return t||h.elem||h.destroy(),n?n():i},a=this.container.parent().parents(":hidden").length>0,r=this.container.add(this.arrow),e=[],a&&t)s="show";else if(a&&!t)s="hide";else if(!a&&t)s=this.options.showAnimation,e.push(this.options.showDuration);else{if(a||t)return o();s=this.options.hideAnimation,e.push(this.options.hideDuration)}return e.push(o),r[s].apply(r,e)},t.prototype.setGlobalPosition=function(){var t,n,i,e,o,r,a,h;return h=this.getPosition(),a=h[0],r=h[1],o=x[a],t=x[r],e=a+"|"+r,n=p[e],n||(n=p[e]=s("div"),i={},i[o]=0,"middle"===t?i.top="45%":"center"===t?i.left="45%":i[t]=0,n.css(i).addClass(""+g+"-corner"),$("body").append(n)),n.prepend(this.wrapper)},t.prototype.setElementPosition=function(){var t,n,e,o,r,s,a,h,l,p,d,f,y,g,v,b,S,C,A,M,N,z,D,E,k,L,j,O,I;for(D=this.getPosition(),M=D[0],C=D[1],A=D[2],d=this.elem.position(),h=this.elem.outerHeight(),f=this.elem.outerWidth(),l=this.elem.innerHeight(),p=this.elem.innerWidth(),E=this.wrapper.position(),r=this.container.height(),s=this.container.width(),g=x[M],b=w[M],S=x[b],a={},a[S]="b"===M?h:"r"===M?f:0,u(a,"top",d.top-E.top),u(a,"left",d.left-E.left),I=["top","left"],k=0,j=I.length;j>k;k++)N=I[k],v=parseInt(this.elem.css("margin-"+N),10),v&&u(a,N,v);if(y=Math.max(0,this.options.gap-(this.options.arrowShow?e:0)),u(a,S,y),this.options.arrowShow){for(e=this.options.arrowSize,n=$.extend({},a),t=this.userContainer.css("border-color")||this.userContainer.css("background-color")||"white",L=0,O=m.length;O>L;L++)N=m[L],z=x[N],N!==b&&(o=z===g?t:"transparent",n["border-"+z]=""+e+"px solid "+o);u(a,x[b],e),T.call(m,C)>=0&&u(n,x[C],2*e)}else this.arrow.hide();return T.call(H,M)>=0?(u(a,"left",P(C,s,f)),n&&u(n,"left",P(C,e,p))):T.call(c,M)>=0&&(u(a,"top",P(C,r,h)),n&&u(n,"top",P(C,e,l))),this.container.is(":visible")&&(a.display="block"),this.container.removeAttr("style").css(a),n?this.arrow.removeAttr("style").css(n):i},t.prototype.getPosition=function(){var t,n,i,e,o,r,s,a;if(n=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),t=y(n),0===t.length&&(t[0]="b"),i=t[0],0>T.call(m,i))throw"Must be one of ["+m+"]";return(1===t.length||(e=t[0],T.call(H,e)>=0&&(o=t[1],0>T.call(c,o)))||(r=t[0],T.call(c,r)>=0&&(s=t[1],0>T.call(H,s))))&&(t[1]=(a=t[0],T.call(c,a)>=0?"m":"l")),2===t.length&&(t[2]=t[1]),t},t.prototype.getStyle=function(t){var n;if(t||(t=this.options.style),t||(t="default"),n=C[t],!n)throw"Missing style: "+t;return n},t.prototype.updateClasses=function(){var t,n;return t=["base"],$.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),n=this.getStyle(),t=$.map(t,function(t){return""+g+"-"+n.name+"-"+t}).join(" "),this.userContainer.attr("class",t)},t.prototype.run=function(t,n){var e=this;return $.isPlainObject(n)?$.extend(this.options,n):"string"===$.type(n)&&(this.options.color=n),this.container&&!t?(this.show(!1),i):this.container||t?(this.text[this.rawHTML?"html":"text"](t),this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide?(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(function(){return e.show(!1)},this.options.autoHideDelay)):i):i},t.prototype.destroy=function(){return this.wrapper.remove()},t}(),$[v]=function(t,n,i){return t&&t.nodeName||t.jquery?$(t)[v](n,i):(i=n,n=t,new e(null,n,i)),t},$.fn[v]=function(t,n){return $(this).each(function(){var i;return i=h($(this)).data(g),i?i.run(t,n):new e($(this),t,n)}),this},$.extend($[v],{defaults:a,addStyle:o,pluginOptions:b,getStyle:l}),$(function(){return f(r.css).attr("data-notify-style","core"),$(n).on("click","."+g+"-wrapper",function(){var t;return(t=$(this).data(g))?t.elem?t.show(!1):t.destroy():i})})})(window,document);